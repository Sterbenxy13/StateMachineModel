State Machine Model for flet app